<!DOCTYPE html>
<html lang="vi" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SSO Hub</title>
  <style>
    /* THIẾT LẬP CHỦ ĐỀ SÁNG VÀ MÀU SẮC CHỦ ĐẠO */
    :root{
      --bg:#f0f4f7; --card:#ffffff; --accent:#3b82f6; --muted:#64748b; --text:#1f2937;
      /* ĐIỀU CHỈNH: Nền Glassmorphism cho phần Services */
      --glass-bg: rgba(255, 255, 255, 0.7); 
      --shadow-color: rgba(0, 0, 0, 0.15); /* Bóng đổ rõ hơn */
      --border-color-light: rgba(255, 255, 255, 0.8); /* Viền sáng */
      --border-color: rgba(0, 0, 0, 0.15); /* Viền tối hơn cho các phần tử bên trong */
    }
    *{box-sizing:border-box}
    html,body{
        height:100%;margin:0;
        font-family:Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
        color:var(--text);
        background: none; 
    }
    a{color:inherit;text-decoration:none}
    
    /* TRANG TRÍ NỀN VỚI HÌNH ẢNH */
    .page-bg {
        position: fixed;
        inset: 0;
        z-index: 0;
        overflow: hidden;
        pointer-events: none;
        background-image: url('https://source.unsplash.com/random/1920x1080/?technology,abstract');
        background-size: cover;
        background-position: center;
        filter: grayscale(0.2) brightness(0.9);
    }
    .float-shape { 
        position: absolute;
        filter: blur(50px);
        opacity: 0.6;
        transform: translate3d(0,0,0);
    }

    /* BỐ CỤC MỚI TẬP TRUNG (Sử dụng Grid/Flex cho 2 cột) */
    .container{
        min-height:100vh;
        display:flex;
        flex-direction:column;
        align-items: center;
        justify-content: center;
        padding: 24px;
        position: relative;
        z-index: 10;
        transition: filter 0.5s ease; 
    }
    .main{
        display:grid; 
        grid-template-columns: 1fr 400px; 
        gap: 5px;
        max-width:1400px; 
        width:100%;
        margin: 0;
        padding: 0;
    }
    
    /* INTRO SECTION: GIỮ TRONG SUỐT (Chỉ có Blur) */
    .intro{
        display:flex;
        flex-direction: column;
        gap: 20px;
        padding:20px;
        /* background, border, box-shadow bị loại bỏ */
        border-radius:20px; 
        backdrop-filter: blur(15px); 
        position: relative;
		overflow: hidden;
    }
    .logo-intro {
		width: 100px;
		height: 100px;
		border-radius: 1%;
		/* Đã xóa background gradient và các thuộc tính text (color, font-weight, v.v.) */
		/* display:flex... cũng được xóa vì không cần căn giữa text nữa 
		background: #ffffff; /* Thêm nền trắng dự phòng nếu logo trong suốt 
		box-shadow: 0 8px 20px rgba(59,130,246,0.3); */
		overflow: hidden; /* Rất quan trọng: Cắt hình ảnh theo góc tròn */
	}
	/* CSS MỚI CHO HÌNH ẢNH LOGO */
	.logo-intro img {
		width: 100%;
		height: 100%;
		object-fit: contain; /* Đảm bảo ảnh lấp đầy vòng tròn mà không bị méo/giãn */
	}

    .headline{font-size:40px;margin:10px 0 8px;color:var(--text); font-weight: 800; line-height: 1.1;}
    .lead{color:var(--muted);margin:0 0 16px; font-size: 18px;}
    .cta .primary{background:linear-gradient(90deg,var(--accent),#2563eb);border:none;padding:12px 24px;border-radius:12px;color:white;cursor:pointer;box-shadow:0 8px 20px rgba(59,130,246,0.3)}

    /* PLACEHOLDER CHO HÌNH ẢNH TRONG SUỐT */
    
	.hero-image-placeholder {
        margin-top: 10px;
        flex-grow: 1; 
        min-height: 50px;
        width: 100%;
        border-radius: 20px;
		    overflow: hidden;
        background-color: rgba(255, 255, 255, 0.05); 
        /* ĐÃ THAY ĐỔI: Xóa display:flex, align-items, justify-content, color, font-style */
		    z-index: -1;
        position: relative; /* ĐÃ THÊM: Để chứa nội dung overlay */
    }
	
	.hero-image-placeholder img {
		width: 100%;
		height: 100%; 
		object-fit: conver;
        opacity: 0.8;
	}

    /* === KHỐI CSS MỚI CHO NỘI DUNG OVERLAY === */
    .hero-overlay-content {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;

        
        padding: 20px 24px;
        display: flex;
        flex-direction: column;
        align-items: center; /* Căn giữa các phần tử (như nút) */
        gap: 12px;
    }
    
    .hero-overlay-content .lead {
        color: #0d0343; /* Chuyển chữ thành màu đen*/
        text-shadow: 0 1px 3px rgba(0,0,0,0.5); /* Thêm bóng cho chữ */
        margin-bottom: 0; /* Ghi đè margin cũ */
        text-align: left;
        font-size: 16px; /* Hơi nhỏ lại 1 chút cho phù hợp */
    }

    .hero-overlay-content .cta {
        /* Không cần CSS đặc biệt, nó sẽ tự căn giữa */
    }
    /* === KẾT THÚC KHỐI CSS MỚI === */


    /* SERVICES/CARDS WRAPPER (Cột riêng cho Cards) KHÔI PHỤC NỀN, VIỀN VÀ BÓNG ĐỔ */
    .services-wrapper {
        display: flex;
        flex-direction: column;
        gap: 24px;
        padding: 40px 30px;
        background: var(--glass-bg); /* Khôi phục nền */
        border-radius: 20px;
        box-shadow: 0 30px 80px var(--shadow-color); /* Khôi phục bóng đổ */
        border: 1px solid var(--border-color-light); /* Khôi phục viền */
        backdrop-filter: blur(15px);
        margin: 20px;
    }
    .services-wrapper h2 {
        font-size: 20px;
        font-weight: 700;
        margin: 0;
        color: var(--accent);
        border-bottom: 2px solid rgba(59, 130, 246, 0.2);
        padding-bottom: 15px;
        text-align: center;
    }

    .cards-wrapper{
        display: flex;
        flex-direction: column; 
        gap: 16px;
        flex-grow: 1;
    }

    .card{
        width: 100%; 
        height: auto;
        min-height: 90px;
        background:var(--card);
        border-radius:14px;
        padding:15px;
        display:flex;
        flex-direction:row;
        align-items: center;
        gap: 15px;
        box-shadow:0 10px 25px rgba(0,0,0,0.08);
        border: 1px solid var(--border-color); /* Tinh chỉnh lại border của card */
        cursor:pointer;
        transition:transform .2s ease,box-shadow .2s, border-color 0.2s;
        text-align: left;
    }
    .card:hover{
        transform:translateX(5px);
        box-shadow:0 15px 30px rgba(0,0,0,0.1);
        border-color: var(--accent);
    }
    .card h3{margin: 0; font-size: 16px; font-weight: 700;}
    .card p.small { margin: 0; font-size: 13px; color: var(--muted); }
    .platform-icon{width:50px;height:50px;border-radius:12px;display:flex;align-items:center;justify-content:center;color:white;font-weight:700; font-size: 24px; flex-shrink: 0;}
    
    /* Login PANEL: Giữ nguyên để dễ đọc */
    .panel{
        position:fixed;right:24px;top:24px;bottom:24px;width:480px; 
        background:var(--card);
        border-radius:20px; 
        padding:30px; 
        box-shadow:0 30px 80px var(--shadow-color);
        transform:translateX(40px); 
        opacity:0;pointer-events:none;transition:all .3s ease; 
        z-index:100; 
        border: 1px solid rgba(0,0,0,0.15);
        display: flex;
        flex-direction: column;
    }
    .panel.show{transform:none;opacity:1;pointer-events:auto}
    .panel h2{font-size: 32px; font-weight: 800; margin-bottom: 10px; color: var(--text);} 
    .panel .small{font-size:15px;color:var(--muted); margin-bottom: 20px;}
    
    /* Các tùy chọn đăng nhập trong Panel */
    .opt-list{display:flex;flex-direction:column;gap:15px;margin-top:0;}
    .opt{
        display:flex;gap:15px;align-items:center;padding:15px 20px;border-radius:12px;
        border:1px solid var(--border-color);
        cursor:pointer;
        background: var(--bg);
        transition: all 0.2s ease;
    }
    .opt:hover{border-color: var(--accent); transform: translateY(-3px); box-shadow: 0 6px 15px rgba(0,0,0,0.08);}
    .opt .icon{
        width:40px;height:40px;border-radius:10px;
        background:var(--glass-bg); 
        display:flex;align-items:center;justify-content:center;
        color:var(--accent);font-weight:700; font-size: 20px;
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.05); 
    }
    .opt .meta{flex:1;}
    .opt .meta strong{font-size: 16px; color: var(--text);}
    .opt .meta .small{font-size: 13px; margin-top: 2px;}

    /* Form đăng nhập */
    .form-area-wrapper {
        border-top: 1px solid rgba(0,0,0,0.08); 
        margin-top: 25px;
        padding-top: 25px;
        display: none; 
    }
    .field{margin-top:15px;display:flex;flex-direction:column;gap:10px;}
    input[type=text], input[type=password]{
        padding:12px 15px;border-radius:10px;border:1px solid rgba(0,0,0,0.15); 
        background:var(--bg);color:var(--text);font-size: 16px;
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }
    input[type=text]:focus, input[type=password]:focus {
        outline: none;
        border-color: var(--accent);
        box-shadow: 0 0 0 3px rgba(59,130,246,0.2);
    }
    .submit{
        margin-top:20px;padding:14px 20px;border-radius:12px;border:none;cursor:pointer;
        background:linear-gradient(90deg,var(--accent),#2563eb);color:white;font-size: 17px; font-weight: 600;
        box-shadow: 0 8px 20px rgba(59,130,246,0.3);
        transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .submit:hover{
        transform: translateY(-2px);
        box-shadow: 0 12px 25px rgba(59,130,246,0.4);
    }
    .panel-footer {
        margin-top: auto; 
        padding-top: 20px;
        text-align: center;
        border-top: 1px solid rgba(0,0,0,0.08);
        font-size: 13px;
        color: var(--muted);
    }

    /* FOOTER */
    footer{
        position: relative;
        bottom: 0;
        width: 100%;
        padding:18px 24px;
        background:rgba(255, 255, 255, 0.4);
        text-align:center;
        color:var(--muted);
        z-index: 5;
    }

    /* HIỆU ỨNG MỜ CHO LANDING PAGE */
    .container.reduced{
        filter: blur(8px) grayscale(0.5); 
        pointer-events: none;
        transform: scale(0.98); 
        opacity: 0.6;
    }
    /* Responsive */
    @media (max-width:1100px){
        .main {
            grid-template-columns: 1fr; 
            gap: 24px;
            max-width: 700px;
        }
        .services-wrapper {
            padding: 30px;
        }
        .hero-image-placeholder {
            min-height: 100px;
        }
    }

    @media (max-width:900px){
      .panel{position:fixed;left:12px;right:12px;top:24px;bottom: 24px; width:auto}
      .intro{padding: 32px 24px;}
      .headline{font-size: 30px;}
    }
    @media (max-width: 500px){
        .services-wrapper {
            padding: 24px;
        }
        .card { padding: 12px; }
        .platform-icon{width: 40px; height: 40px; font-size: 20px;}
        .card h3{font-size: 15px;}
        .panel{padding: 20px;}
        .panel h2{font-size: 28px;}
        /* Responsive cho overlay */
        .hero-overlay-content { padding: 16px; }
        .hero-overlay-content .lead { font-size: 14px; }
    }
  </style>
</head>
<body class="h-full">
    <div class="page-bg" aria-hidden="true">
        <svg class="float-shape" style="left:-5%; top:-10%; width:720px; height:520px;" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="g1" x1="0%" x2="100%" y1="0%" y2="100%">
                    <stop offset="0%" stop-color="#3b82f6" stop-opacity="0.9" />
                    <stop offset="100%" stop-color="#6366f1" stop-opacity="0.8" />
                </linearGradient>
            </defs>
            <rect width="600" height="600" rx="120" fill="url(#g1)" />
        </svg>

        <svg class="float-shape" style="right:5%; bottom:5%; width:520px; height:420px; opacity: 0.4;" viewBox="0 0 600 600" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="g2" x1="0%" x2="100%" y1="0%" y2="100%">
                    <stop offset="0%" stop-color="#10b981" stop-opacity="0.9" />
                    <stop offset="100%" stop-color="#0ea5e9" stop-opacity="0.7" />
                </linearGradient>
            </defs>
            <circle cx="300" cy="300" r="300" fill="url(#g2)" />
        </svg>
    </div>

  <div class="container" id="page">
    <main class="main">
      <section class="intro">
        <div class="logo-intro">
			<img src="./images/LogoLSTS.png" alt="Logo Trường" style="border-radius:16%">
		</div>
        <h1 class="headline"><span style="color:var(--accent);">Cổng truy cập (LSTS portal)</span></h1>
        
        <div class="hero-image-placeholder">
            <img src="./images/HS.png">
            
            <div class="hero-overlay-content">
                <p class="lead">Hệ thống Đăng nhập một lần (SSO) giúp bạn truy cập mọi nền tảng một cách an toàn và tiện lợi bằng tài khoản trường.</p>
                <div class="cta">
                    <button class="primary" onclick="alert('Xem Hướng dẫn')">Xem Hướng Dẫn</button>
                </div>
            </div>
        </div>

        </section>

      <section class="services-wrapper">
        <h2>Chọn nền tảng</h2>
        <div class="cards-wrapper">
            <div class="card" data-platform="canvas" tabindex="0">
                <div class="platform-icon" style="background:linear-gradient(135deg,#e53e3e,#f6ad55)">L</div>
                <div>
                    <h3>Canvas LMS</h3>
                    <p class="small">Hệ thống quản lý học tập và tài liệu khóa học</p>
                </div>
            </div>

            <div class="card" data-platform="email" tabindex="0">
                <div class="platform-icon" style="background:linear-gradient(135deg,#2563eb,#38bdf8)">M</div>
                <div>
                    <h3>Email</h3>
                    <p class="small">Hộp thư điện tử chính thức của trường</p>
                </div>
            </div>

            <div class="card" data-platform="crm" tabindex="0">
                <div class="platform-icon" style="background:linear-gradient(135deg,#10b981,#34d399)">C</div>
                <div>
                    <h3>CRM</h3>
                    <p class="small">Hệ thống thông tin chung</p>
                </div>
            </div>

			</div>
      </section>
      
    </main>
  </div>

  <div class="panel" id="panel">
    <div id="panelInner">
      <h2 id="panelTitle">Đăng nhập</h2>
      <p class="small" id="panelDesc">Chọn phương thức đăng nhập</p>
      <div class="opt-list" id="options">
        </div>
      <div id="formArea" class="form-area-wrapper">
        <div class="field">
          <label class="small">Tên đăng nhập</label>
          <input type="text" id="username" placeholder="user@domain.edu" />
        </div>
        <div class="field">
          <label class="small">Mật khẩu</label>
          <input type="password" id="password" placeholder="••••••••" />
        </div>
        <button class="submit" id="submitBtn">Đăng nhập</button>
        <p class="panel-footer">Quên mật khẩu? <a href="#" style="color: var(--accent);">Liên hệ hỗ trợ</a></p>
      </div>
    </div>
  </div>

  <footer>
      <div style="max-width:1080px;margin:0 auto;padding:12px;">© 2025 Trường THCS và THPT Đinh Thiện Lý / Lawrence S. Ting School.</div>
  </footer>

  <script>
    const page = document.getElementById('page');
    const panel = document.getElementById('panel');
    const options = document.getElementById('options');
    const panelTitle = document.getElementById('panelTitle');
    const panelDesc = document.getElementById('panelDesc');
    const formArea = document.getElementById('formArea'); 

    // Khai báo dữ liệu nền tảng
    const platforms = {
      canvas: {
        name:'Canvas LMS',
        desc: 'Đăng nhập vào Canvas bằng tài khoản trường',
        options: [
          // ĐÃ THÊM THUỘC TÍNH 'url'
          {id:'ms', title:'Đăng nhập với Microsoft', subtitle:'Sử dụng tài khoản Office 365 của trường', type:'sso', provider:'microsoft', url:'https://lsts.instructure.com/login/saml'},
          {id:'google', title:'Đăng nhập với Google', subtitle:'Sử dụng Google Workspace của trường', type:'sso', provider:'google', url:'https://lsts.instructure.com/login/google'}
        ]
      },
      email: {
        name: 'Email',
        desc: 'Đăng nhập hộp thư trường',
        options: [
          // ĐÃ THÊM THUỘC TÍNH 'url'
          {id:'ms', title:'Đăng nhập với Microsoft', subtitle:'Office 365 / Exchange', type:'sso', provider:'microsoft', url:'https://outlook.office365.com/mail'}
        ]
      },
      crm: {
        name: 'CRM',
        desc: 'Hệ thống CRM - đăng nhập bằng tên người dùng',
        options: [
          //{id:'local', title:'Đăng nhập bằng tài khoản', subtitle:'Tài khoản CRM (user + mật khẩu)', type:'form', url:'#'} // URL '#' chỉ là placeholder cho form login
          {id:'local', title:'Đăng nhập bằng tài khoản', subtitle:'Tài khoản CRM', type:'sso', url:'https://crm3.lsts.edu.vn/crm/'}
        ]
      }
    };

    // Gắn sự kiện click cho các Card
    document.querySelectorAll('.card').forEach(card=>{
      card.addEventListener('click', ()=> showPanel(card.dataset.platform));
      card.addEventListener('keydown', (e)=>{ if(e.key==='Enter') showPanel(card.dataset.platform); });
    });

    panel.addEventListener('mouseleave', ()=> closePanel());

    function showPanel(platformKey){
      const p = platforms[platformKey];
      if(!p) return;
      panelTitle.textContent = p.name;
      panelDesc.textContent = p.desc;
      options.innerHTML = '';
      formArea.style.display='none'; 

      p.options.forEach(op=>{
        const d = document.createElement('div');
        d.className='opt';
        d.tabIndex = 0;
        // Thêm mô tả của card vào innerHTML
        d.innerHTML = `<div class=\"icon\">${iconFor(op.provider||op.id)}</div><div class=\"meta\"><strong>${op.title}</strong><div class=\"small\">${op.subtitle}</div></div>`;
        d.addEventListener('click', ()=>selectOption(op));
        d.addEventListener('keydown', (e)=>{ if(e.key==='Enter') selectOption(op); });
        options.appendChild(d);
      });

      // show panel và áp dụng hiệu ứng mờ
      panel.classList.add('show');
      page.classList.add('reduced'); 
      document.body.classList.add('panel-open');
      
      panel.dataset.current = platformKey;
    }

    // === HÀM SELECT OPTION ĐÃ CẬP NHẬT ===
    function selectOption(op){
      if(op.type === 'sso'){
        // CHUYỂN HƯỚNG ĐẾN URL ĐÃ KHAI BÁO
        if(op.url) {
            window.location.href = op.url;
        } else {
            alert('Không tìm thấy đường dẫn chuyển hướng.');
        }
      } else if(op.type === 'form'){
        // Đối với form login, chỉ hiển thị form
        formArea.style.display='block'; 
      }
    }
    // ======================================

    function iconFor(id){
      if(id==='microsoft' || id==='ms') return 'M';
      if(id==='google') return 'G';
      return '•'; 
    }

    // Xử lý đóng panel
    document.addEventListener('click', (e)=>{
      if(!panel.contains(e.target) && !e.target.closest('.card')){
        closePanel();
      }
    });

    function closePanel(){
      panel.classList.remove('show');
      page.classList.remove('reduced'); 
      document.body.classList.remove('panel-open');
      setTimeout(()=>{ options.innerHTML=''; formArea.style.display='none'; }, 300);
    }

    // submit handler (demo)
    document.getElementById('submitBtn').addEventListener('click', ()=>{
      const u=document.getElementById('username').value;
      const p=document.getElementById('password').value;
      if(!u||!p){alert('Vui lòng nhập tên đăng nhập và mật khẩu');return}
      alert('Đã gửi dữ liệu đăng nhập (demo): ' + u);
    });

    // Accessibility: close panel with Escape
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closePanel(); });

  </script>
</body>
</html>
